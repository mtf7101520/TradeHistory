<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜é¢‘äº¤æ˜“è®°å½•åˆ†æç³»ç»Ÿ</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://unpkg.com/element-plus/dist/index.full.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); font-family: 'Arial', sans-serif; }
        .main-container { min-height: 100vh; padding: 20px; }
        .header { background: rgba(255,255,255,0.95); border-radius: 15px; padding: 20px; margin-bottom: 20px; backdrop-filter: blur(10px); }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 15px; box-shadow: 0 8px 32px rgba(0,0,0,0.1); }
        .chart-container { background: rgba(255,255,255,0.95); border-radius: 15px; padding: 20px; margin-bottom: 20px; backdrop-filter: blur(10px); }
        .data-table { background: rgba(255,255,255,0.95); border-radius: 15px; padding: 20px; backdrop-filter: blur(10px); margin-bottom: 20px; }
        .ranking-container { background: rgba(255,255,255,0.95); border-radius: 15px; padding: 20px; margin-bottom: 20px; backdrop-filter: blur(10px); }
        .mistake-book { background: rgba(255,255,255,0.95); border-radius: 15px; padding: 20px; margin-bottom: 20px; backdrop-filter: blur(10px); }
        .add-record-btn { position: fixed; bottom: 30px; right: 30px; z-index: 1000; }
        .profit { color: #67C23A; font-weight: bold; }
        .loss { color: #F56C6C; font-weight: bold; }
        .trade-type-buy { background: #F56C6C; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; }
        .trade-type-sell { background: #67C23A; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; }
        .trade-type-add { background: #409EFF; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; }
        .ranking-item { display: flex; align-items: center; padding: 10px; margin-bottom: 8px; border-radius: 8px; background: #f8f9fa; }
        .ranking-number { width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 15px; }
        .ranking-1 { background: #FFD700; color: #fff; }
        .ranking-2 { background: #C0C0C0; color: #fff; }
        .ranking-3 { background: #CD7F32; color: #fff; }
        .ranking-other { background: #e9ecef; color: #666; }
        .mistake-item { background: #fff2f0; border: 1px solid #ffccc7; border-radius: 8px; padding: 15px; margin-bottom: 10px; }
        .mistake-header { display: flex; justify-content: between; align-items: center; margin-bottom: 10px; }
        .mistake-stock { font-weight: bold; color: #F56C6C; }
        .mistake-loss { color: #F56C6C; font-size: 14px; }
        .mistake-reason { color: #666; font-size: 14px; line-height: 1.5; }
        .tab-content { margin-top: 20px; }
    </style>
</head>
<body>
    <div id="app">
        <div class="main-container">
            <div class="header">
                <h1 style="text-align: center; color: #333; font-size: 28px;">é«˜é¢‘äº¤æ˜“è®°å½•åˆ†æç³»ç»Ÿ</h1>
                <p style="text-align: center; color: #666; margin-top: 10px;">æ™ºèƒ½åˆ†æäº¤æ˜“æ•°æ®ï¼Œä¼˜åŒ–æŠ•èµ„ç­–ç•¥</p>
            </div>

            <!-- ç»Ÿè®¡å¡ç‰‡ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>æ€»äº¤æ˜“æ¬¡æ•°</h3>
                    <div style="font-size: 32px; font-weight: bold; margin-top: 10px;">{{ totalTrades }}</div>
                </div>
                <div class="stat-card">
                    <h3>æ€»ç›ˆäº</h3>
                    <div style="font-size: 32px; font-weight: bold; margin-top: 10px;" :class="totalProfit >= 0 ? 'profit' : 'loss'">
                        {{ formatCurrency(totalProfit) }}
                    </div>
                </div>
                <div class="stat-card">
                    <h3>èƒœç‡</h3>
                    <div style="font-size: 32px; font-weight: bold; margin-top: 10px;">{{ winRate }}%</div>
                </div>
                <div class="stat-card">
                    <h3>å¹³å‡æ¯ç¬”æ”¶ç›Š</h3>
                    <div style="font-size: 32px; font-weight: bold; margin-top: 10px;" :class="avgProfit >= 0 ? 'profit' : 'loss'">
                        {{ formatCurrency(avgProfit) }}
                    </div>
                </div>
            </div>

            <!-- å›¾è¡¨åŒºåŸŸ -->
            <div class="chart-container">
                <h3 style="margin-bottom: 20px;">ç›ˆäºè¶‹åŠ¿å›¾</h3>
                <div id="profitChart" style="height: 400px;"></div>
            </div>

            <!-- æ ‡ç­¾é¡µå¯¼èˆª -->
            <div class="data-table">
                <el-tabs v-model="activeTab" type="card">
                    <el-tab-pane label="äº¤æ˜“è®°å½•" name="records">
                        <div style="margin-bottom: 20px;">
                            <el-button type="primary" @click="dialogVisible = true">
                                <i class="el-icon-plus"></i> æ·»åŠ äº¤æ˜“è®°å½•
                            </el-button>
                            <el-button @click="exportData" style="margin-left: 10px;">å¯¼å‡ºæ•°æ®</el-button>
                        </div>
                        
                        <el-table :data="paginatedTrades" stripe style="width: 100%">
                            <el-table-column prop="date" label="æ—¥æœŸ" width="120"></el-table-column>
                            <el-table-column prop="stock" label="è‚¡ç¥¨ä»£ç " width="100"></el-table-column>
                            <el-table-column prop="stockName" label="è‚¡ç¥¨åç§°" width="120"></el-table-column>
                            <el-table-column label="äº¤æ˜“ç±»å‹" width="100">
                                <template #default="scope">
                                    <span :class="getTradeTypeClass(scope.row.type)">
                                        {{ getTradeTypeText(scope.row.type) }}
                                    </span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="quantity" label="æ•°é‡" width="100"></el-table-column>
                            <el-table-column prop="price" label="ä»·æ ¼" width="100">
                                <template #default="scope">
                                    {{ formatCurrency(scope.row.price) }}
                                </template>
                            </el-table-column>
                            <el-table-column prop="profit" label="ç›ˆäº" width="120">
                                <template #default="scope">
                                    <span :class="scope.row.profit >= 0 ? 'profit' : 'loss'">
                                        {{ formatCurrency(scope.row.profit) }}
                                    </span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="notes" label="å¤‡æ³¨" min-width="150"></el-table-column>
                            <el-table-column label="æ“ä½œ" width="120">
                                <template #default="scope">
                                    <el-button size="mini" @click="editTrade(scope.row)">ç¼–è¾‘</el-button>
                                    <el-button size="mini" type="danger" @click="deleteTrade(scope.$index)">åˆ é™¤</el-button>
                                </template>
                            </el-table-column>
                        </el-table>
                        
                        <el-pagination
                            @current-change="handleCurrentChange"
                            :current-page="currentPage"
                            :page-size="pageSize"
                            layout="total, prev, pager, next"
                            :total="trades.length"
                            style="margin-top: 20px; text-align: center;">
                        </el-pagination>
                    </el-tab-pane>

                    <el-tab-pane label="æ”¶ç›Šæ’è¡Œæ¦œ" name="ranking">
                        <div class="ranking-container">
                            <el-row :gutter="20">
                                <el-col :span="12">
                                    <h3 style="margin-bottom: 20px; color: #67C23A;">ğŸ“ˆ ç›ˆåˆ©æ’è¡Œæ¦œ</h3>
                                    <div v-for="(item, index) in profitRanking" :key="index" class="ranking-item">
                                        <div :class="getRankingClass(index + 1)">{{ index + 1 }}</div>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold;">{{ item.stockName || item.stock }}</div>
                                            <div style="font-size: 12px; color: #666;">{{ item.stock }}</div>
                                        </div>
                                        <div class="profit" style="font-size: 16px; font-weight: bold;">
                                            {{ formatCurrency(item.profit) }}
                                        </div>
                                    </div>
                                </el-col>
                                <el-col :span="12">
                                    <h3 style="margin-bottom: 20px; color: #F56C6C;">ğŸ“‰ äºæŸæ’è¡Œæ¦œ</h3>
                                    <div v-for="(item, index) in lossRanking" :key="index" class="ranking-item">
                                        <div :class="getRankingClass(index + 1)">{{ index + 1 }}</div>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold;">{{ item.stockName || item.stock }}</div>
                                            <div style="font-size: 12px; color: #666;">{{ item.stock }}</div>
                                        </div>
                                        <div class="loss" style="font-size: 16px; font-weight: bold;">
                                            {{ formatCurrency(item.profit) }}
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </div>
                    </el-tab-pane>

                    <el-tab-pane label="å¤±è´¥äº¤æ˜“é”™é¢˜é›†" name="mistakes">
                        <div class="mistake-book">
                            <h3 style="margin-bottom: 20px; color: #F56C6C;">ğŸ“š å¤±è´¥äº¤æ˜“åˆ†æä¸æ€»ç»“</h3>
                            <el-alert
                                title="é”™é¢˜é›†è¯´æ˜"
                                description="è®°å½•æ¯æ¬¡å¤±è´¥äº¤æ˜“çš„åŸå› ï¼Œå¸®åŠ©æ€»ç»“ç»éªŒæ•™è®­ï¼Œé¿å…é‡å¤çŠ¯é”™"
                                type="info"
                                :closable="false"
                                style="margin-bottom: 20px;">
                            </el-alert>
                            
                            <div v-if="failedTrades.length === 0" style="text-align: center; color: #999; padding: 40px;">
                                ğŸ‰ æ­å–œï¼æš‚æ— å¤±è´¥äº¤æ˜“è®°å½•
                            </div>
                            
                            <div v-for="(trade, index) in failedTrades" :key="index" class="mistake-item">
                                <div class="mistake-header">
                                    <div>
                                        <span class="mistake-stock">{{ trade.stockName || trade.stock }}</span>
                                        <span style="margin-left: 10px; color: #999; font-size: 12px;">{{ trade.date }}</span>
                                    </div>
                                    <div class="mistake-loss">äºæŸ: {{ formatCurrency(Math.abs(trade.profit)) }}</div>
                                </div>
                                <div style="margin-bottom: 8px; font-size: 14px; color: #666;">
                                    <strong>äº¤æ˜“è¯¦æƒ…:</strong> {{ getTradeTypeText(trade.type) }} {{ trade.quantity }}è‚¡ @ {{ formatCurrency(trade.price) }}
                                </div>
                                <div class="mistake-reason">
                                    <strong>å¤±è´¥åŸå› :</strong> {{ trade.failureReason || 'æœªå¡«å†™å¤±è´¥åŸå› ' }}
                                </div>
                                <div v-if="trade.notes" style="margin-top: 8px; font-size: 12px; color: #888;">
                                    <strong>å¤‡æ³¨:</strong> {{ trade.notes }}
                                </div>
                            </div>
                            
                            <!-- å¤±è´¥åŸå› ç»Ÿè®¡ -->
                            <div v-if="failedTrades.length > 0" style="margin-top: 30px;">
                                <h4 style="margin-bottom: 15px;">å¤±è´¥åŸå› ç»Ÿè®¡</h4>
                                <div id="failureReasonChart" style="height: 300px;"></div>
                            </div>
                        </div>
                    </el-tab-pane>
                </el-tabs>
            </div>
        </div>

        <!-- æ·»åŠ /ç¼–è¾‘äº¤æ˜“è®°å½•å¯¹è¯æ¡† -->
        <el-dialog :title="isEditing ? 'ç¼–è¾‘äº¤æ˜“è®°å½•' : 'æ·»åŠ äº¤æ˜“è®°å½•'" v-model="dialogVisible" width="500px">
            <el-form :model="newTrade" label-width="100px">
                <el-form-item label="æ—¥æœŸ">
                    <el-date-picker v-model="newTrade.date" type="date" format="YYYY-MM-DD" value-format="YYYY-MM-DD" style="width: 100%;"></el-date-picker>
                </el-form-item>
                <el-form-item label="è‚¡ç¥¨ä»£ç ">
                    <el-input v-model="newTrade.stock" placeholder="è¯·è¾“å…¥è‚¡ç¥¨ä»£ç "></el-input>
                </el-form-item>
                <el-form-item label="è‚¡ç¥¨åç§°">
                    <el-input v-model="newTrade.stockName" placeholder="è¯·è¾“å…¥è‚¡ç¥¨åç§°"></el-input>
                </el-form-item>
                <el-form-item label="äº¤æ˜“ç±»å‹">
                    <el-select v-model="newTrade.type" style="width: 100%;">
                        <el-option label="ä¹°å…¥" value="buy"></el-option>
                        <el-option label="å–å‡º" value="sell"></el-option>
                        <el-option label="åŠ ä»“" value="add"></el-option>
                    </el-select>
                </el-form-item>
                <el-form-item label="æ•°é‡">
                    <el-input-number v-model="newTrade.quantity" :min="1" style="width: 100%;"></el-input-number>
                </el-form-item>
                <el-form-item label="ä»·æ ¼">
                    <el-input-number v-model="newTrade.price" :precision="2" :min="0" style="width: 100%;"></el-input-number>
                </el-form-item>
                <el-form-item label="ç›ˆäº">
                    <el-input-number v-model="newTrade.profit" :precision="2" style="width: 100%;"></el-input-number>
                </el-form-item>
                <el-form-item label="å¤±è´¥åŸå› " v-if="newTrade.profit < 0">
                    <el-input v-model="newTrade.failureReason" type="textarea" :rows="3" placeholder="è¯·åˆ†æå¤±è´¥åŸå› ï¼Œä¾¿äºåç»­æ€»ç»“"></el-input>
                </el-form-item>
                <el-form-item label="å¤‡æ³¨">
                    <el-input v-model="newTrade.notes" type="textarea" :rows="3"></el-input>
                </el-form-item>
            </el-form>
            <template #footer>
                <span class="dialog-footer">
                    <el-button @click="dialogVisible = false">å–æ¶ˆ</el-button>
                    <el-button type="primary" @click="saveTrade">ä¿å­˜</el-button>
                </span>
            </template>
        </el-dialog>
    </div>

    <script>
        const { createApp } = Vue;
        const { ElButton, ElTable, ElTableColumn, ElDialog, ElForm, ElFormItem, ElInput, ElInputNumber, ElSelect, ElOption, ElDatePicker, ElPagination, ElTabs, ElTabPane, ElRow, ElCol, ElAlert } = ElementPlus;

        createApp({
            components: {
                ElButton, ElTable, ElTableColumn, ElDialog, ElForm, ElFormItem, ElInput, ElInputNumber, ElSelect, ElOption, ElDatePicker, ElPagination, ElTabs, ElTabPane, ElRow, ElCol, ElAlert
            },
            data() {
                return {
                    activeTab: 'records',
                    dialogVisible: false,
                    isEditing: false,
                    editingIndex: -1,
                    currentPage: 1,
                    pageSize: 10,
                    trades: [
                        { date: '2024-01-15', stock: '000001', stockName: 'å¹³å®‰é“¶è¡Œ', type: 'buy', quantity: 100, price: 15.20, profit: 150.00, notes: 'æŠ€æœ¯é¢è‰¯å¥½', failureReason: '' },
                        { date: '2024-01-16', stock: '000002', stockName: 'ä¸‡ç§‘A', type: 'sell', quantity: 200, price: 18.50, profit: -320.00, notes: 'æ­¢æŸå‡ºå±€', failureReason: 'æœªåŠæ—¶å…³æ³¨æ”¿ç­–é£é™©ï¼Œæˆ¿åœ°äº§æ¿å—æ•´ä½“ä¸‹è·Œ' },
                        { date: '2024-01-17', stock: '600519', stockName: 'è´µå·èŒ…å°', type: 'add', quantity: 10, price: 1680.00, profit: 500.00, notes: 'é•¿æœŸæŒæœ‰', failureReason: '' },
                        { date: '2024-01-18', stock: '600036', stockName: 'æ‹›å•†é“¶è¡Œ', type: 'buy', quantity: 300, price: 42.10, profit: -180.00, notes: 'é“¶è¡Œè‚¡è°ƒæ•´', failureReason: 'å¿½ç•¥äº†é“¶è¡Œä¸šå‡€æ¯å·®æ”¶çª„çš„å½±å“ï¼Œè¿‡æ—©å…¥åœº' }
                    ],
                    newTrade: {
                        date: new Date().toISOString().split('T')[0],
                        stock: '',
                        stockName: '',
                        type: 'buy',
                        quantity: 100,
                        price: 0,
                        profit: 0,
                        notes: '',
                        failureReason: ''
                    }
                }
            },
            computed: {
                totalTrades() {
                    return this.trades.length;
                },
                totalProfit() {
                    return this.trades.reduce((sum, trade) => sum + trade.profit, 0);
                },
                winRate() {
                    const winTrades = this.trades.filter(trade => trade.profit > 0).length;
                    return this.totalTrades > 0 ? Math.round((winTrades / this.totalTrades) * 100) : 0;
                },
                avgProfit() {
                    return this.totalTrades > 0 ? this.totalProfit / this.totalTrades : 0;
                },
                paginatedTrades() {
                    const start = (this.currentPage - 1) * this.pageSize;
                    return this.trades.slice(start, start + this.pageSize);
                },
                profitRanking() {
                    const stockProfits = {};
                    this.trades.forEach(trade => {
                        const key = trade.stock;
                        if (!stockProfits[key]) {
                            stockProfits[key] = {
                                stock: trade.stock,
                                stockName: trade.stockName,
                                profit: 0
                            };
                        }
                        stockProfits[key].profit += trade.profit;
                    });
                    return Object.values(stockProfits)
                        .filter(item => item.profit > 0)
                        .sort((a, b) => b.profit - a.profit)
                        .slice(0, 10);
                },
                lossRanking() {
                    const stockProfits = {};
                    this.trades.forEach(trade => {
                        const key = trade.stock;
                        if (!stockProfits[key]) {
                            stockProfits[key] = {
                                stock: trade.stock,
                                stockName: trade.stockName,
                                profit: 0
                            };
                        }
                        stockProfits[key].profit += trade.profit;
                    });
                    return Object.values(stockProfits)
                        .filter(item => item.profit < 0)
                        .sort((a, b) => a.profit - b.profit)
                        .slice(0, 10);
                },
                failedTrades() {
                    return this.trades
                        .filter(trade => trade.profit < 0)
                        .sort((a, b) => new Date(b.date) - new Date(a.date));
                },
                failureReasons() {
                    const reasons = {};
                    this.failedTrades.forEach(trade => {
                        const reason = trade.failureReason || 'æœªåˆ†æ';
                        if (!reasons[reason]) {
                            reasons[reason] = { count: 0, loss: 0 };
                        }
                        reasons[reason].count++;
                        reasons[reason].loss += Math.abs(trade.profit);
                    });
                    return reasons;
                }
            },
            mounted() {
                this.$nextTick(() => {
                    this.initCharts();
                });
            },
            watch: {
                activeTab(newTab) {
                    this.$nextTick(() => {
                        if (newTab === 'mistakes' && this.failedTrades.length > 0) {
                            this.initFailureReasonChart();
                        }
                    });
                }
            },
            methods: {
                initCharts() {
                    // ç›ˆäºè¶‹åŠ¿å›¾
                    const chartDom = document.getElementById('profitChart');
                    const myChart = echarts.init(chartDom);
                    
                    let cumulativeProfit = 0;
                    const data = this.trades.map((trade, index) => {
                        cumulativeProfit += trade.profit;
                        return {
                            date: trade.date,
                            profit: cumulativeProfit,
                            dailyProfit: trade.profit
                        };
                    });

                    const option = {
                        tooltip: {
                            trigger: 'axis',
                            formatter: function(params) {
                                const point = params[0];
                                const trade = data[point.dataIndex];
                                return `æ—¥æœŸ: ${point.name}<br/>
                                       ç´¯è®¡ç›ˆäº: ${trade.profit.toFixed(2)}å…ƒ<br/>
                                       å½“æ—¥ç›ˆäº: ${trade.dailyProfit.toFixed(2)}å…ƒ`;
                            }
                        },
                        grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                        xAxis: { type: 'category', data: data.map(d => d.date) },
                        yAxis: { type: 'value', name: 'ç›ˆäº(å…ƒ)' },
                        series: [{
                            name: 'ç´¯è®¡ç›ˆäº',
                            type: 'line',
                            data: data.map(d => d.profit),
                            smooth: true,
                            itemStyle: { color: '#5470c6' },
                            areaStyle: { 
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                    { offset: 0, color: 'rgba(84, 112, 198, 0.3)' },
                                    { offset: 1, color: 'rgba(84, 112, 198, 0.1)' }
                                ])
                            }
                        }]
                    };
                    
                    myChart.setOption(option);
                },
                initFailureReasonChart() {
                    const chartDom = document.getElementById('failureReasonChart');
                    if (!chartDom) return;
                    
                    const myChart = echarts.init(chartDom);
                    const reasons = this.failureReasons;
                    
                    const data = Object.keys(reasons).map(key => ({
                        name: key,
                        value: reasons[key].count,
                        loss: reasons[key].loss
                    }));

                    const option = {
                        tooltip: {
                            trigger: 'item',
                            formatter: '{b}: {c}æ¬¡<br/>æ€»äºæŸ: {d}å…ƒ'
                        },
                        legend: {
                            orient: 'vertical',
                            left: 'left'
                        },
                        series: [{
                            name: 'å¤±è´¥åŸå› ',
                            type: 'pie',
                            radius: '50%',
                            data: data,
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                }
                            }
                        }]
                    };
                    
                    myChart.setOption(option);
                },
                formatCurrency(value) {
                    return `Â¥${value.toFixed(2)}`;
                },
                getTradeTypeText(type) {
                    const types = { buy: 'ä¹°å…¥', sell: 'å–å‡º', add: 'åŠ ä»“' };
                    return types[type] || type;
                },
                getTradeTypeClass(type) {
                    return `trade-type-${type}`;
                },
                getRankingClass(rank) {
                    if (rank === 1) return 'ranking-number ranking-1';
                    if (rank === 2) return 'ranking-number ranking-2';
                    if (rank === 3) return 'ranking-number ranking-3';
                    return 'ranking-number ranking-other';
                },
                handleCurrentChange(page) {
                    this.currentPage = page;
                },
                saveTrade() {
                    if (this.isEditing) {
                        this.$set(this.trades, this.editingIndex, {...this.newTrade});
                    } else {
                        this.trades.push({...this.newTrade});
                    }
                    this.dialogVisible = false;
                    this.resetForm();
                    this.$nextTick(() => {
                        this.initCharts();
                    });
                },
                editTrade(trade) {
                    this.newTrade = {...trade};
                    this.isEditing = true;
                    this.editingIndex = this.trades.indexOf(trade);
                    this.dialogVisible = true;
                },
                deleteTrade(index) {
                    const realIndex = (this.currentPage - 1) * this.pageSize + index;
                    this.trades.splice(realIndex, 1);
                    this.$nextTick(() => {
                        this.initCharts();
                    });
                },
                resetForm() {
                    this.newTrade = {
                        date: new Date().toISOString().split('T')[0],
                        stock: '',
                        stockName: '',
                        type: 'buy',
                        quantity: 100,
                        price: 0,
                        profit: 0,
                        notes: '',
                        failureReason: ''
                    };
                    this.isEditing = false;
                    this.editingIndex = -1;
                },
                exportData() {
                    const dataStr = JSON.stringify(this.trades, null, 2);
                    const blob = new Blob([dataStr], {type: 'application/json'});
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `trading_records_${new Date().toISOString().split('T')[0]}.json`;
                    a.click();
                    URL.revokeObjectURL(url);
                }
            }
        }).use(ElementPlus).mount('#app');
    </script>
</body>
</html>